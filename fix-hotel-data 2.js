#!/usr/bin/env node
/**
 * Fix Hotel Data Script
 * р╣Бр╕Бр╣Йр╣Др╕Вр╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╣Вр╕вр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Вр╕гр╕Зр╣Бр╕гр╕бр╣Гр╕лр╣Йр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
 * sweettuay.bt@gmail.com р╕Др╕зр╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Бр╕▒р╕Ъ "р╕гр╕╡р╕кр╕нр╕гр╣Мр╕Чр╣Гр╕Щр╕Эр╕▒р╕Щ р╣Ар╕Кр╕╡р╕вр╕Зр╣Гр╕лр╕бр╣И"
 */

const ADMIN_TOKEN = 'admin-secret-token-2026'

async function fixHotelData() {
  console.log('ЁЯФз ===============================')
  console.log('   р╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Вр╕гр╕Зр╣Бр╕гр╕б')
  console.log('ЁЯФз ===============================')
  console.log('')

  try {
    // 1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Вр╕гр╕Зр╣Бр╕гр╕бр╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щ
    console.log('ЁЯФН р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Вр╕гр╕Зр╣Бр╕гр╕бр╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щ...')

    // р╕Фр╕╣р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Вр╕гр╕Зр╣Бр╕гр╕бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
    const hotelResponse = await fetch('http://localhost:3000/api/hotels/list', {
      headers: {
        'Authorization': `Bearer ${ADMIN_TOKEN}`
      }
    })

    if (hotelResponse.ok) {
      const hotels = await hotelResponse.json()
      console.log('ЁЯУЛ р╣Вр╕гр╕Зр╣Бр╕гр╕бр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ:')
      hotels.forEach((hotel, index) => {
        console.log(`   ${index + 1}. ${hotel.name_th} (${hotel.id})`)
        console.log(`      ЁЯУз р╕нр╕╡р╣Ар╕бр╕е: ${hotel.login_email || 'р╣Др╕бр╣Ир╕бр╕╡'}`)
        console.log(`      ЁЯСд Auth User ID: ${hotel.auth_user_id || 'р╣Др╕бр╣Ир╕бр╕╡'}`)
        console.log('')
      })
    } else {
      console.log('тЪая╕П  р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Вр╕гр╕Зр╣Бр╕гр╕бр╣Др╕Фр╣Й')
    }

    // 2. р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В
    const correctData = {
      email: 'sweettuay.bt@gmail.com',
      correctHotelName: 'р╕гр╕╡р╕кр╕нр╕гр╣Мр╕Чр╣Гр╕Щр╕Эр╕▒р╕Щ р╣Ар╕Кр╕╡р╕вр╕Зр╣Гр╕лр╕бр╣И',
      correctHotelId: '550e8400-e29b-41d4-a716-446655440002' // р╕Ир╕▓р╕Б mock data
    }

    console.log('ЁЯОп р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В:')
    console.log(`   ЁЯУз р╕нр╕╡р╣Ар╕бр╕е: ${correctData.email}`)
    console.log(`   ЁЯПи р╣Вр╕гр╕Зр╣Бр╕гр╕бр╕Чр╕╡р╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З: ${correctData.correctHotelName}`)
    console.log(`   ЁЯЖФ Hotel ID: ${correctData.correctHotelId}`)
    console.log('')

    // 3. р╣Бр╕Щр╕░р╕Щр╕│р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Йр╣Др╕В
    console.log('ЁЯТб р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Йр╣Др╕В:')
    console.log('   1. р╕лр╕▓р╕зр╣Ир╕▓ sweettuay.bt@gmail.com р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Бр╕▒р╕Ър╣Вр╕гр╕Зр╣Бр╕гр╕бр╣Др╕лр╕Щр╕Хр╕нр╕Щр╕Щр╕╡р╣Й')
    console.log('   2. р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╣Вр╕вр╕Зр╣Др╕Ыр╕вр╕▒р╕Зр╕гр╕╡р╕кр╕нр╕гр╣Мр╕Чр╣Гр╕Щр╕Эр╕▒р╕Щ р╣Ар╕Кр╕╡р╕вр╕Зр╣Гр╕лр╕бр╣И')
    console.log('   3. р╕лр╕гр╕╖р╕нр╕кр╕гр╣Йр╕▓р╕Зр╕Ър╕▒р╕Нр╕Кр╕╡р╣Гр╕лр╕бр╣Ир╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕╡р╕кр╕нр╕гр╣Мр╕Чр╣Гр╕Щр╕Эр╕▒р╕Щ р╣Ар╕Кр╕╡р╕вр╕Зр╣Гр╕лр╕бр╣И')
    console.log('')

    // 4. р╣Бр╕Щр╕░р╕Щр╕│р╕Др╕│р╕кр╕▒р╣Ир╕Зр╣Бр╕Бр╣Йр╣Др╕В
    console.log('ЁЯУЭ р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Чр╕╡р╣Ир╣Бр╕Щр╕░р╕Щр╕│:')
    console.log('   A. р╕кр╕гр╣Йр╕▓р╕Зр╕Ър╕▒р╕Нр╕Кр╕╡р╣Гр╕лр╕бр╣Ир╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕╡р╕кр╕нр╕гр╣Мр╕Чр╣Гр╕Щр╕Эр╕▒р╕Щ:')
    console.log(`      - Email: manager@dreamresortchiangmai.com`)
    console.log(`      - Hotel ID: ${correctData.correctHotelId}`)
    console.log('')
    console.log('   B. р╕лр╕гр╕╖р╕нр╣Бр╕Бр╣Йр╣Др╕Вр╕Ър╕▒р╕Нр╕Кр╕╡р╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щ:')
    console.log(`      - р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕Ир╕▓р╕Б Hilton р╣Ар╕Ыр╣Зр╕Щ р╕гр╕╡р╕кр╕нр╕гр╣Мр╕Чр╣Гр╕Щр╕Эр╕▒р╕Щ`)
    console.log('')

  } catch (error) {
    console.error('ЁЯТе р╣Ар╕Бр╕┤р╕Фр╕Вр╣Йр╕нр╕Ьр╕┤р╕Фр╕Юр╕ер╕▓р╕Ф:', error.message)
  }

  console.log('ЁЯФз ===============================')
  console.log('   р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ')
  console.log('ЁЯФз ===============================')
}

// р╣Ар╕гр╕╡р╕вр╕Бр╣Гр╕Кр╣Й function
fixHotelData().catch(console.error)